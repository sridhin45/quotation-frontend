<h2 style="text-align: center; color: green;">
  {{ mode === 'add' ? 'Create Quotation' : 'Edit Quotation' }}
</h2>

<form (ngSubmit)="submit()" class="quote-form">

  <div class="section">
    <div class="row">
      <div class="field">
        <label>Customer Name</label>
        <input type="text" [(ngModel)]="customerName" name="customerName" required />
      </div>

      <div class="field">
        <label>Customer Phone</label>
        <input type="text" [(ngModel)]="customerPhone" name="customerPhone" />
      </div>

      <div class="field">
        <label>Salesman Name</label>
        <input type="text" [(ngModel)]="salesmanName" name="salesmanName" required />
      </div>

      <div class="field">
        <label>Tax (%)</label>
        <input type="number" [(ngModel)]="tax" name="tax" />
      </div>
    </div>
  </div>

  <hr>

  <div *ngFor="let item of items; let i = index" class="item-card">
    <h4>Item {{ i + 1 }}</h4>

    <div class="row">
      <div class="field large">
        <label>Name Of The Item</label>
        <input type="text" [(ngModel)]="item.description" name="d{{i}}" required />
      </div>

      <div class="field small">
        <label>Qty</label>
        <input type="number" [(ngModel)]="item.quantity" name="q{{i}}" min="1" required />
      </div>

      <div class="field small">
        <label>Unit Price</label>
        <input type="number" [(ngModel)]="item.unit_price" name="p{{i}}" min="0" required />
      </div>

      <div class="field">
        <label>Product Image</label>

        <!-- EDIT MODE - SHOW OLD IMAGE -->
        <div *ngIf="item.image && mode==='edit'">
          <img 
            [src]="'https://quotation-backend-e2jd.onrender.com/uploads/' + item.image"
            width="80" height="80">
        </div>

        <input type="file" (change)="onItemImageSelected($event, i)" />
      </div>

      <button type="button" class="remove-btn" *ngIf="items.length > 1"
        (click)="removeItem(i)">
        âœ–
      </button>
    </div>

    <hr>
  </div>

  <button type="button" class="add-btn" (click)="addItem()">+ Add Item</button>

  <button type="submit" class="submit-btn">
    {{ mode === 'add' ? 'Create Quotation' : 'Update Quotation' }}
  </button>

</form>
